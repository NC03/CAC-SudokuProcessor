
import java.awt.image.*;
import javax.imageio.*;
import java.io.*;
import java.awt.Color;

/**
 * Number Recognition
 * 
 * @author Nick
 * @version 1.0
 */
public class HistogramGenerator {
    public static double[][][] model = { { { 0.019417475728155338, 0.02059429243895263, 0.021771109149749925,
            0.022947925860547218, 0.02412474257134451, 0.026331273904089438, 0.028684907325684024, 0.03103854074727861,
            0.0333921741688732, 0.03574580759046778, 0.03809944101206237, 0.04045307443365696, 0.04280670785525155,
            0.04442483083259782, 0.045601647543395116, 0.04677846425419241, 0.0479552809649897, 0.04854368932038835,
            0.04854368932038835, 0.04854368932038835, 0.04854368932038835, 0.04854368932038835, 0.04854368932038835,
            0.04854368932038835, 0.04854368932038835, 0.04824948514268903, 0.047072668431891736, 0.045895851721094436,
            0.04471903501029715, 0.04324801412180053, 0.03971756398940864, 0.03618711385701676, 0.03265666372462489,
            0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301,
            0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301,
            0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301,
            0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301,
            0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301,
            0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301,
            0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301,
            0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301,
            0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301, 0.02912621359223301,
            0.02912621359223301, 0.035010297146219505, 0.04442483083259784, 0.05383936451897618, 0.06325389820535451,
            0.06796116504854369, 0.06796116504854369, 0.06796116504854369, 0.06796116504854369, 0.06796116504854369,
            0.06796116504854369, 0.06796116504854369, 0.06796116504854369, 0.06796116504854369, 0.06796116504854369,
            0.06796116504854369, 0.06796116504854369, 0.06796116504854369, 0.06796116504854369, 0.06796116504854369,
            0.06796116504854369, 0.06796116504854369 },
            { 0.043689320388349516, 0.04432676277336472, 0.044964205158379913, 0.045601647543395116,
                    0.04623908992841032, 0.04687653231342552, 0.047513974698440715, 0.04815141708345592,
                    0.04854368932038835, 0.04854368932038835, 0.04854368932038835, 0.04854368932038835,
                    0.04854368932038835, 0.04854368932038835, 0.04854368932038835, 0.04854368932038835,
                    0.04854368932038835, 0.04854368932038835, 0.04854368932038835, 0.04854368932038835,
                    0.04854368932038835, 0.04854368932038835, 0.04854368932038835, 0.04981857409041876,
                    0.058105325095616375, 0.06639207610081399, 0.07467882710601159, 0.0829655781112092,
                    0.09125232911640682, 0.09953908012160442, 0.10782583112680202, 0.11199372364420909,
                    0.1126311660292243, 0.1132686084142395, 0.11390605079925469, 0.11454349318426989,
                    0.11518093556928509, 0.11581837795430029, 0.1164558203393155, 0.1170932627243307,
                    0.11773070510934588, 0.11836814749436109, 0.11900558987937629, 0.11964303226439149,
                    0.1202804746494067, 0.1209179170344219, 0.12135922330097088, 0.12135922330097088,
                    0.12135922330097088, 0.12135922330097088, 0.12135922330097088, 0.12135922330097088,
                    0.12135922330097088, 0.12135922330097088, 0.12135922330097088, 0.12135922330097088,
                    0.12135922330097088, 0.12135922330097088, 0.12135922330097088, 0.12135922330097088,
                    0.12135922330097088, 0.12135922330097088, 0.12135922330097088, 0.12135922330097088,
                    0.12135922330097088, 0.12135922330097088, 0.12135922330097088, 0.12135922330097088,
                    0.12135922330097088, 0.11547513974698424, 0.10272629204668038, 0.08997744434637636,
                    0.07722859664607233, 0.0644797489457683, 0.05173090124546427, 0.03898205354516024,
                    0.026233205844856222, 0.024271844660194174, 0.024271844660194174, 0.024271844660194174,
                    0.024271844660194174, 0.024271844660194174, 0.024271844660194174, 0.024271844660194174,
                    0.024271844660194174, 0.024271844660194174, 0.024271844660194174, 0.024271844660194174,
                    0.024271844660194174, 0.024271844660194174, 0.024271844660194174, 0.024271844660194174,
                    0.024271844660194174, 0.024271844660194174, 0.024271844660194174, 0.024271844660194174,
                    0.024271844660194174, 0.024271844660194174, 0.024271844660194174, 0.024271844660194174 } },
            { { 0.02888086642599278, 0.032381577507931296, 0.03588228858986982, 0.03938299967180833,
                    0.042883710753746855, 0.04485286073733727, 0.046603216278306527, 0.048353571819275784,
                    0.05010392736024505, 0.052510666229077775, 0.05513619954053167, 0.05776173285198556,
                    0.06038726616343945, 0.061371841155234655, 0.061371841155234655, 0.061371841155234655,
                    0.061371841155234655, 0.06049666338475003, 0.058746307843780765, 0.05699595230281151,
                    0.05524559676184225, 0.052838857893009517, 0.04933814681107099, 0.04583743572913247,
                    0.04233672464719396, 0.039054808007876606, 0.036429274696422716, 0.03380374138496882,
                    0.031178208073514933, 0.028662071983371624, 0.02691171644240236, 0.0251613609014331,
                    0.02341100536046384, 0.021660649819494584, 0.022535827589979213, 0.02341100536046384,
                    0.02428618313094847, 0.025161360901433106, 0.02527075812274368, 0.02527075812274368,
                    0.02527075812274368, 0.02527075812274368, 0.02527075812274368, 0.02527075812274368,
                    0.02527075812274368, 0.02527075812274368, 0.02527075812274368, 0.02527075812274368,
                    0.02527075812274368, 0.02527075812274368, 0.02527075812274368, 0.02527075812274368,
                    0.02527075812274368, 0.02527075812274368, 0.02527075812274368, 0.02527075812274368,
                    0.02527075812274368, 0.02527075812274368, 0.02527075812274368, 0.02527075812274368,
                    0.02527075812274368, 0.02527075812274368, 0.02527075812274368, 0.02527075812274368,
                    0.02527075812274368, 0.02527075812274368, 0.02527075812274368, 0.02614593589322831,
                    0.027021113663712938, 0.02789629143419757, 0.0287714692046822, 0.02888086642599278,
                    0.02888086642599278, 0.02888086642599278, 0.02888086642599278, 0.02888086642599278,
                    0.02888086642599278, 0.02888086642599278, 0.02888086642599278, 0.03380374138496885,
                    0.0416803413193305, 0.049556941253692165, 0.05743354118805383, 0.06180943004047697,
                    0.06268460781096159, 0.06355978558144622, 0.06443496335193086, 0.06498194945848375,
                    0.06498194945848375, 0.06498194945848375, 0.06498194945848375, 0.06498194945848375,
                    0.06498194945848375, 0.06498194945848375, 0.06498194945848375, 0.06498194945848375,
                    0.06498194945848375, 0.06498194945848375, 0.06498194945848375, 0.06498194945848375 },
                    { 0.02527075812274368, 0.026510593297596904, 0.02775042847245013, 0.028990263647303356,
                            0.030230098822156583, 0.03146993399700981, 0.03281916639317361, 0.03467891915545345,
                            0.03653867191773329, 0.03839842468001312, 0.040258177442292965, 0.0421179302045728,
                            0.04375888852423148, 0.044998723699084704, 0.046238558873937935, 0.04747839404879116,
                            0.04871822922364438, 0.049958064398497606, 0.05054151624548736, 0.05054151624548736,
                            0.05054151624548736, 0.05054151624548736, 0.05054151624548736, 0.05054151624548736,
                            0.05054151624548736, 0.05054151624548736, 0.05054151624548736, 0.05054151624548736,
                            0.05054151624548736, 0.05054151624548736, 0.05108850235204025, 0.05170841993946687,
                            0.05232833752689348, 0.052948255114320095, 0.05356817270174671, 0.05415162454873646,
                            0.05415162454873646, 0.05415162454873646, 0.05415162454873646, 0.05415162454873646,
                            0.05415162454873646, 0.0542974875104839, 0.054917405097910515, 0.05553732268533713,
                            0.05615724027276374, 0.05677715786019035, 0.05739707544761696, 0.05801699303504358,
                            0.05863691062247019, 0.0592568282098968, 0.05987674579732341, 0.06049666338475003,
                            0.061116580972176635, 0.062101155963971845, 0.06334099113882508, 0.0645808263136783,
                            0.06582066148853152, 0.06706049666338475, 0.06830033183823797, 0.06954016701309121,
                            0.07078000218794442, 0.07201983736279764, 0.07325967253765088, 0.0744995077125041,
                            0.07573934288735731, 0.0763957262152208, 0.0770156438026474, 0.07763556139007402,
                            0.07825547897750064, 0.07887539656492726, 0.0792765197097327, 0.07803668453487948,
                            0.07679684936002626, 0.07555701418517304, 0.07431717901031981, 0.07307734383546657,
                            0.07201983736279766, 0.07139991977537104, 0.07078000218794442, 0.07016008460051781,
                            0.06954016701309121, 0.06892024942566459, 0.06800860591474311, 0.06676877073988988,
                            0.06552893556503665, 0.06428910039018343, 0.06304926521533019, 0.06180943004047697,
                            0.06056959486562375, 0.05932975969077053, 0.0580899245159173, 0.05685008934106407,
                            0.05561025416621085, 0.054370418991357625, 0.05210954308427232, 0.0496298727345659,
                            0.04715020238485943, 0.04467053203515296, 0.04219086168544654, 0.039711191335740074 } },
            { { 0.028368794326241134, 0.03195071280177663, 0.03553263127731213, 0.03911454975284762,
                    0.04266064904362777, 0.04534708790027939, 0.04803352675693101, 0.050719965613582635,
                    0.053334766100723546, 0.0551257253384913, 0.05691668457625904, 0.058707643814026794,
                    0.060176230388996346, 0.05928075077011247, 0.058385271151228595, 0.05748979153234472,
                    0.05602120495737516, 0.051543806862955795, 0.04706640876853642, 0.04258901067411705,
                    0.03846980442725123, 0.03578336557059961, 0.03309692671394798, 0.03041048785729636,
                    0.027938964109176876, 0.026148004871409128, 0.024357045633641376, 0.022566086395873628,
                    0.021527330037968338, 0.02242280965685221, 0.023318289275736086, 0.02421376889461996,
                    0.024822695035460994, 0.024822695035460994, 0.024822695035460994, 0.024822695035460994,
                    0.026112185686653785, 0.029694104162189282, 0.03327602263772478, 0.03685794111326028,
                    0.038648900351028005, 0.03775342073214413, 0.03685794111326026, 0.03596246149437639,
                    0.03546099290780142, 0.03546099290780142, 0.03546099290780142, 0.03546099290780142,
                    0.03632065334192994, 0.03811161257969769, 0.03990257181746543, 0.041693531055233185,
                    0.0425531914893617, 0.0425531914893617, 0.0425531914893617, 0.0425531914893617,
                    0.040045848556486845, 0.035568450462067476, 0.0310910523676481, 0.026613654273228732,
                    0.024285407264130667, 0.02338992764524679, 0.022494448026362916, 0.021598968407479043,
                    0.02127659574468085, 0.02127659574468085, 0.02127659574468085, 0.02127659574468085,
                    0.02249444802636293, 0.024285407264130678, 0.026076366501898426, 0.027867325739666174,
                    0.030947775628626713, 0.03452969410416221, 0.03811161257969771, 0.041693531055233206,
                    0.0452754495307687, 0.048857368006304205, 0.0524392864818397, 0.0560212049573752,
                    0.05888673973780359, 0.06157317859445521, 0.06425961745110684, 0.06694605630775846,
                    0.06587148076509777, 0.06408052152733001, 0.06228956228956227, 0.06049860305179452,
                    0.05870764381402677, 0.05691668457625902, 0.05512572533849128, 0.053334766100723525,
                    0.04989612436420943, 0.04631420588867393, 0.042732287413138434, 0.03915036893760293,
                    0.03212980872555341, 0.02496597177448242, 0.017802134823411423, 0.010638297872340425 },
                    { 0.0070921985815602835, 0.009026434558349452, 0.01096067053513862, 0.01289490651192779,
                            0.014829142488716958, 0.01676337846550613, 0.018697614442295292, 0.020631850419084462,
                            0.02256608639587363, 0.0245003223726628, 0.026434558349451968, 0.028368794326241134,
                            0.02965828497743391, 0.030947775628626693, 0.032237266279819474, 0.03352675693101225,
                            0.03481624758220503, 0.036428110896196006, 0.038362346872985176, 0.04029658284977434,
                            0.04223081882656351, 0.04416505480335267, 0.04609929078014184, 0.044809800128949064,
                            0.043520309477756286, 0.0422308188265635, 0.040941328175370724, 0.039651837524177946,
                            0.04061895551257253, 0.04384268214055448, 0.04706640876853643, 0.05029013539651838,
                            0.05351386202450033, 0.05673758865248227, 0.05609284332688588, 0.05544809800128949,
                            0.0548033526756931, 0.05415860735009671, 0.05351386202450032, 0.05319148936170213,
                            0.05319148936170213, 0.05319148936170213, 0.05319148936170213, 0.05319148936170213,
                            0.05319148936170213, 0.05319148936170213, 0.05319148936170213, 0.05319148936170213,
                            0.05319148936170213, 0.05319148936170213, 0.05319148936170213, 0.05319148936170213,
                            0.05319148936170213, 0.05319148936170213, 0.05319148936170213, 0.05319148936170213,
                            0.05383623468729851, 0.054480980012894906, 0.05512572533849129, 0.05577047066408769,
                            0.056415215989684075, 0.05834945196647326, 0.0615731785944552, 0.06479690522243714,
                            0.0680206318504191, 0.07124435847840103, 0.07446808510638298, 0.07704706640876853,
                            0.07962604771115409, 0.08220502901353964, 0.08478401031592522, 0.08736299161831078,
                            0.08833010960670536, 0.08768536428110896, 0.08704061895551257, 0.08639587362991619,
                            0.08575112830431979, 0.0851063829787234, 0.08446163765312702, 0.08381689232753063,
                            0.08317214700193423, 0.08252740167633785, 0.08188265635074146, 0.08059316569954868,
                            0.07865892972275951, 0.07672469374597034, 0.07479045776918118, 0.07285622179239201,
                            0.07092198581560284, 0.06898774983881366, 0.0670535138620245, 0.06511927788523532,
                            0.06318504190844618, 0.06125080593165698, 0.05834945196647326, 0.05448098001289489,
                            0.050612508059316594, 0.046744036105738226, 0.04287556415215986, 0.03900709219858156 } },
            { { 0.02120141342756184, 0.022058036192311812, 0.022914658957061785, 0.023771281721811758,
                    0.024627904486561727, 0.025484527251311704, 0.026341150016061677, 0.02719777278081165,
                    0.028054395545561623, 0.028268551236749116, 0.028268551236749116, 0.028268551236749116,
                    0.028268551236749116, 0.028803940464717848, 0.02966056322946782, 0.030517185994217794,
                    0.03137380875896777, 0.03223043152371774, 0.03308705428846771, 0.03394367705321769,
                    0.034800299817967666, 0.0353356890459364, 0.0353356890459364, 0.0353356890459364,
                    0.0353356890459364, 0.03554984473712389, 0.03640646750187386, 0.03726309026662384,
                    0.038119713031373806, 0.03897633579612378, 0.03983295856087376, 0.04068958132562373,
                    0.041546204090373705, 0.04240282685512368, 0.04240282685512368, 0.04240282685512368,
                    0.04240282685512368, 0.04240282685512368, 0.04165328193596745, 0.04079665917121748,
                    0.039940036406467504, 0.039083413641717524, 0.03951172502409252, 0.04036834778884249,
                    0.04122497055359247, 0.04208159331834244, 0.04240282685512368, 0.04240282685512368,
                    0.04240282685512368, 0.04240282685512368, 0.04197451547274869, 0.04111789270799872,
                    0.040261269943248745, 0.039404647178498765, 0.038869257950530034, 0.038869257950530034,
                    0.038869257950530034, 0.038869257950530034, 0.041010814862404966, 0.04957704250990469,
                    0.058143270157404475, 0.0667094978049042, 0.07420494699646643, 0.07420494699646643,
                    0.07420494699646643, 0.07420494699646643, 0.07420494699646643, 0.07420494699646643,
                    0.07420494699646643, 0.07420494699646643, 0.07420494699646643, 0.07420494699646643,
                    0.07420494699646643, 0.07420494699646643, 0.07420494699646643, 0.07292001284934146,
                    0.07120676731984152, 0.06949352179034157, 0.06778027626084163, 0.06017774922368559,
                    0.049041653281935944, 0.0379055573401863, 0.02676946139843666, 0.02120141342756184,
                    0.02120141342756184, 0.02120141342756184, 0.02120141342756184, 0.02120141342756184,
                    0.02120141342756184, 0.02120141342756184, 0.02120141342756184, 0.02120141342756184,
                    0.02120141342756184, 0.02120141342756184, 0.02120141342756184, 0.02120141342756184,
                    0.02120141342756184, 0.02120141342756184, 0.02120141342756184, 0.02120141342756184 },
                    { 0.014134275618374558, 0.01556198022629118, 0.0169896848342078, 0.018417389442124427,
                            0.01984509405004105, 0.02127279865795767, 0.02270050326587429, 0.024128207873790913,
                            0.025555912481707535, 0.026983617089624157, 0.028339936467144947, 0.029053788771103258,
                            0.02976764107506157, 0.03048149337901988, 0.03119534568297819, 0.03201627583253024,
                            0.03344398044044687, 0.03487168504836349, 0.036299389656280115, 0.03772709426419674,
                            0.039012028411321696, 0.03972588071528001, 0.04043973301923832, 0.04115358532319663,
                            0.041867437627154946, 0.04240282685512368, 0.04240282685512368, 0.04240282685512368,
                            0.04240282685512368, 0.04240282685512368, 0.04261698254631117, 0.04333083485026948,
                            0.04404468715422779, 0.0447585394581861, 0.04547239176214441, 0.045936395759717315,
                            0.045936395759717315, 0.045936395759717315, 0.045936395759717315, 0.045936395759717315,
                            0.045936395759717315, 0.045936395759717315, 0.045936395759717315, 0.045936395759717315,
                            0.045936395759717315, 0.045936395759717315, 0.045936395759717315, 0.045936395759717315,
                            0.045936395759717315, 0.045936395759717315, 0.05021950958346715, 0.0587857372309669,
                            0.06735196487846665, 0.0759181925259664, 0.08448442017346608, 0.08833922261484099,
                            0.08833922261484099, 0.08833922261484099, 0.08833922261484099, 0.08833922261484099,
                            0.08833922261484099, 0.08833922261484099, 0.08833922261484099, 0.08833922261484099,
                            0.08833922261484099, 0.08833922261484099, 0.08833922261484099, 0.08833922261484099,
                            0.08833922261484099, 0.08833922261484099, 0.08833922261484099, 0.08833922261484099,
                            0.08833922261484099, 0.08833922261484099, 0.08833922261484099, 0.08833922261484099,
                            0.08833922261484099, 0.08833922261484099, 0.08833922261484099, 0.08833922261484099,
                            0.07691758575150795, 0.06264053967234182, 0.04836349359317569, 0.03408644751400932,
                            0.019809401434843193, 0.0176678445229682, 0.0176678445229682, 0.0176678445229682,
                            0.0176678445229682, 0.0176678445229682, 0.0176678445229682, 0.0176678445229682,
                            0.0176678445229682, 0.0176678445229682, 0.0176678445229682, 0.01698968483420781,
                            0.01627583253024949, 0.015561980226291183, 0.014848127922332865, 0.014134275618374558 } },
            { { 0.04854368932038835, 0.04854368932038835, 0.04854368932038835, 0.04854368932038835, 0.04854368932038835,
                    0.04854368932038835, 0.04854368932038835, 0.04854368932038835, 0.04854368932038835,
                    0.04854368932038835, 0.04854368932038835, 0.04854368932038835, 0.04864175737962146,
                    0.049458991206564024, 0.05027622503350659, 0.05109345886044915, 0.051649177862770096,
                    0.05083194403582753, 0.05001471020888497, 0.0491974763819424, 0.047072668431891715,
                    0.03971756398940863, 0.03236245954692554, 0.02500735510444246, 0.019221339609689123,
                    0.01840410578274656, 0.017586871955803992, 0.01676963812886143, 0.016181229773462782,
                    0.016181229773462782, 0.016181229773462782, 0.016181229773462782, 0.01827334837043576,
                    0.024811218985976283, 0.031349089601516805, 0.03788696021705733, 0.04265960576640189,
                    0.04429407342028702, 0.04592854107417215, 0.04756300872805728, 0.04887058285116538,
                    0.04968781667810795, 0.05050505050505051, 0.051322284331993075, 0.05177993527508091,
                    0.05177993527508091, 0.05177993527508091, 0.05177993527508091, 0.05177993527508091,
                    0.05177993527508091, 0.05177993527508091, 0.05177993527508091, 0.0492301657350201,
                    0.04432676277336471, 0.039423359811709316, 0.03451995685005393, 0.030531855774574214,
                    0.027262920466803953, 0.02399398515903369, 0.020725049851263434, 0.01990781602432088,
                    0.020725049851263444, 0.02154228367820601, 0.022359517505148578, 0.022653721682847898,
                    0.022653721682847898, 0.022653721682847898, 0.022653721682847898, 0.023209440685168847,
                    0.02402667451211141, 0.024843908339053977, 0.02566114216599654, 0.02765519270373641,
                    0.030106894184564106, 0.0325585956653918, 0.03501029714621949, 0.03808309633552354,
                    0.041352031643293805, 0.044620966951064066, 0.04788990225883433, 0.050505050505050525,
                    0.05295675198587822, 0.05540845346670592, 0.05786015494753361, 0.0568794743552025,
                    0.055245006701317365, 0.05361053904743224, 0.05197607139354711, 0.050341603739661976,
                    0.04870713608577685, 0.047072668431891715, 0.04543820077800659, 0.043051878003334286,
                    0.04060017652250659, 0.0381484750416789, 0.0356967735608512, 0.02932234971069923,
                    0.02278447909515871, 0.016246608479618188, 0.009708737864077669 },
                    { 0.003236245954692557, 0.004478441371645255, 0.005720636788597954, 0.0069628322055506515,
                            0.00820502762250335, 0.009447223039456049, 0.015102481121898593, 0.02193455591513844,
                            0.02876663070837828, 0.035598705501618116, 0.04243078029485797, 0.04746494066882417,
                            0.051191526919682255, 0.05491811317054035, 0.058644699421398445, 0.062371285672256534,
                            0.06518257003693896, 0.06642476545389166, 0.06766696087084437, 0.06890915628779706,
                            0.07015135170474976, 0.07109934294400314, 0.07047824523552679, 0.06985714752705044,
                            0.06923604981857409, 0.06861495211009774, 0.0679938544016214, 0.06737275669314503,
                            0.06675165898466869, 0.06613056127619234, 0.06550946356771599, 0.06488836585923964,
                            0.06335196626458763, 0.061488673139158574, 0.05962538001372952, 0.05776208688830048,
                            0.055898793762871435, 0.05468928769899644, 0.05406818999052009, 0.05344709228204374,
                            0.05282599457356739, 0.05220489686509104, 0.05177993527508091, 0.05177993527508091,
                            0.05177993527508091, 0.05177993527508091, 0.05177993527508091, 0.05177993527508091,
                            0.05177993527508091, 0.05177993527508091, 0.05177993527508091, 0.05177993527508091,
                            0.05177993527508091, 0.05177993527508091, 0.05177993527508091, 0.05177993527508091,
                            0.05177993527508091, 0.05177993527508091, 0.05262985845510117, 0.05387205387205386,
                            0.055114249289006566, 0.05635644470595926, 0.057598640122911965, 0.0594292438952633,
                            0.0619136347291687, 0.0643980255630741, 0.0668824163969795, 0.0693668072308849,
                            0.07119741100323625, 0.07119741100323625, 0.07119741100323625, 0.07119741100323625,
                            0.07119741100323625, 0.07113203229708086, 0.06988983688012815, 0.06864764146317545,
                            0.06740544604622276, 0.06616325062927005, 0.06492105521231735, 0.06420188944460789,
                            0.06358079173613154, 0.0629596940276552, 0.06233859631917884, 0.06171749861070249,
                            0.06031185642836128, 0.05844856330293225, 0.056585270177503186, 0.054721977052074156,
                            0.05285868392664509, 0.049687816678107975, 0.044719035010297226, 0.03975025334248638,
                            0.03478147167467563, 0.029812690006864786, 0.025105423163675637, 0.021378836912817507,
                            0.01765225066195944, 0.01392566441110131, 0.010199078160243246, 0.006472491909385114 } },
            { { 0.025477707006369428, 0.028694589204143344, 0.03191147140191726, 0.03512835359969118,
                    0.038280898153509615, 0.03988933925239658, 0.041497780351283535, 0.04310622145017049,
                    0.04465032490510197, 0.045454545454545456, 0.046258766003988934, 0.04706298655343242,
                    0.04777070063694268, 0.04777070063694268, 0.04777070063694268, 0.04777070063694268,
                    0.046998648909476935, 0.04217332561281605, 0.03734800231615518, 0.032522679019494294,
                    0.028179888052499512, 0.025767226404169074, 0.023354564755838636, 0.020941903107508195,
                    0.01910828025477707, 0.01910828025477707, 0.01910828025477707, 0.01910828025477707,
                    0.01910828025477707, 0.01910828025477707, 0.01910828025477707, 0.01910828025477707,
                    0.020909734285530474, 0.02653927813163483, 0.03216882197773919, 0.03779836582384355,
                    0.042269832078749285, 0.04468249372707972, 0.04709515537541016, 0.0495078170237406,
                    0.051277102232516254, 0.05208132278195973, 0.05288554333140321, 0.05368976388084669,
                    0.05449398443029017, 0.055298204979733645, 0.05610242552917713, 0.05690664607862061,
                    0.05732484076433121, 0.05732484076433121, 0.05732484076433121, 0.05732484076433121,
                    0.05565206202148877, 0.05243517982371485, 0.04921829762594093, 0.04600141542816701,
                    0.04413562375345814, 0.043331403204014664, 0.042527182654571186, 0.04172296210512771,
                    0.04091874155568423, 0.040114521006240744, 0.039310300456797266, 0.03850607990735379,
                    0.03821656050955414, 0.03821656050955414, 0.03821656050955414, 0.03821656050955414,
                    0.03876343048317571, 0.03956765103261919, 0.040371871582062666, 0.041176092131506144,
                    0.040822235089751004, 0.040018014540307525, 0.03921379399086405, 0.03840957344142057,
                    0.038827768127131186, 0.03963198867657467, 0.04043620922601815, 0.04124042977546163,
                    0.042688026764459895, 0.04429646786334686, 0.04590490896223382, 0.04751335006112078,
                    0.04709515537541015, 0.04629093482596666, 0.045486714276523184, 0.044682493727079706,
                    0.043170559094125954, 0.04156211799523899, 0.039953676896352035, 0.03834523579746508,
                    0.03599691179309011, 0.033584250144759666, 0.03117158849642923, 0.02875892684809879,
                    0.023258058289905428, 0.01762851444380107, 0.011998970597696713, 0.006369426751592357 },
                    { 0.028662420382165606, 0.031557614360162134, 0.034452808338158655, 0.03734800231615518,
                            0.040243196294151705, 0.04313839027214823, 0.045744064852345105, 0.04806022003474233,
                            0.05037637521713955, 0.052692530399536766, 0.05500868558193399, 0.05732484076433121,
                            0.05848291835552982, 0.059640995946728434, 0.06079907353792704, 0.06195715112912566,
                            0.06311522872032427, 0.06427330631152287, 0.06543138390272148, 0.06658946149392009,
                            0.0677475390851187, 0.06890561667631731, 0.07006369426751592, 0.07122177185871453,
                            0.07237984944991314, 0.07353792704111176, 0.07469600463231037, 0.07585408222350898,
                            0.07527504342790967, 0.07295888824551244, 0.07064273306311522, 0.068326577880718,
                            0.06601042269832079, 0.06369426751592357, 0.060799073537927045, 0.05790387955993051,
                            0.05500868558193399, 0.05211349160393746, 0.04921829762594094, 0.04748118123914302,
                            0.046902142443543716, 0.04632310364794441, 0.045744064852345105, 0.0451650260567458,
                            0.044585987261146494, 0.0451650260567458, 0.045744064852345105, 0.04632310364794441,
                            0.046902142443543716, 0.04748118123914303, 0.04777070063694268, 0.04777070063694268,
                            0.04777070063694268, 0.04777070063694268, 0.04777070063694268, 0.04777070063694268,
                            0.04777070063694268, 0.04777070063694268, 0.04777070063694268, 0.04777070063694268,
                            0.04777070063694268, 0.0489287782281413, 0.05124493341053852, 0.053561088592935735,
                            0.05587724377533295, 0.05819339895773017, 0.06050955414012739, 0.0622466705269253,
                            0.06398378691372322, 0.06572090330052113, 0.06745801968731906, 0.06919513607411698,
                            0.06977417486971627, 0.06919513607411697, 0.06861609727851765, 0.06803705848291836,
                            0.06745801968731904, 0.06687898089171974, 0.06572090330052113, 0.06456282570932252,
                            0.06340474811812391, 0.0622466705269253, 0.06108859293572669, 0.05964099594672843,
                            0.05790387955993051, 0.0561667631731326, 0.05442964678633468, 0.052692530399536766,
                            0.050955414012738856, 0.04806022003474231, 0.045165026056745806, 0.04226983207874926,
                            0.03937463810075276, 0.03647944412275621, 0.033294730746960065, 0.029820497973364203,
                            0.02634626519976841, 0.02287203242617255, 0.019397799652576684, 0.01592356687898089 } },
            { { 0.07792207792207792, 0.07897153351698806, 0.0800209891118982, 0.08107044470680834, 0.0821199003017185,
                    0.08225108225108226, 0.08225108225108226, 0.08225108225108226, 0.08225108225108226,
                    0.08225108225108226, 0.08225108225108226, 0.08225108225108226, 0.08225108225108226,
                    0.08225108225108226, 0.08225108225108226, 0.08225108225108226, 0.08225108225108226,
                    0.08172635445362718, 0.08067689885871704, 0.0796274432638069, 0.07857798766889676,
                    0.0731995277449823, 0.06060606060606057, 0.0480125934671389, 0.03541912632821723,
                    0.025974025974025976, 0.025974025974025976, 0.025974025974025976, 0.025974025974025976,
                    0.025974025974025976, 0.025974025974025976, 0.025974025974025976, 0.025974025974025976,
                    0.025974025974025976, 0.025974025974025976, 0.025974025974025976, 0.025974025974025976,
                    0.025974025974025976, 0.0250557523284796, 0.02400629673356946, 0.02295684113865932,
                    0.02190738554374918, 0.02243211334120425, 0.02348156893611439, 0.024531024531024535,
                    0.025580480125934675, 0.025974025974025976, 0.025974025974025976, 0.025974025974025976,
                    0.025974025974025976, 0.025974025974025976, 0.025974025974025976, 0.025974025974025976,
                    0.025974025974025976, 0.026367571822117283, 0.02741702741702742, 0.02846648301193756,
                    0.0295159386068477, 0.03004066640430277, 0.02899121080939263, 0.027941755214482483,
                    0.026892299619572343, 0.025974025974025976, 0.025974025974025976, 0.025974025974025976,
                    0.025974025974025976, 0.025974025974025976, 0.027023481568936115, 0.028072937163846255,
                    0.029122392758756395, 0.030171848353666535, 0.029384756657483937, 0.028335301062573797,
                    0.027285845467663643, 0.026236389872753504, 0.026761117670208587, 0.027810573265118727,
                    0.028860028860028867, 0.029909484454939007, 0.030303030303030304, 0.030303030303030304,
                    0.030303030303030304, 0.030303030303030304, 0.030303030303030304, 0.030303030303030304,
                    0.030303030303030304, 0.030303030303030304, 0.029909484454939007, 0.02886002886002885,
                    0.02781057326511871, 0.026761117670208574, 0.025974025974025976, 0.025974025974025976,
                    0.025974025974025976, 0.025974025974025976, 0.02610520792338975, 0.027154663518299885,
                    0.028204119113210024, 0.029253574708120164, 0.030303030303030304 },
                    { 0.021645021645021644, 0.02243211334120425, 0.023219205037386857, 0.024006296733569462,
                            0.024793388429752067, 0.025580480125934675, 0.025974025974025976, 0.025974025974025976,
                            0.025974025974025976, 0.025974025974025976, 0.025974025974025976, 0.025974025974025976,
                            0.025974025974025976, 0.025974025974025976, 0.025974025974025976, 0.025974025974025976,
                            0.025974025974025976, 0.026367571822117276, 0.027154663518299885, 0.02794175521448249,
                            0.028728846910665094, 0.0295159386068477, 0.030303030303030304, 0.034238488783943324,
                            0.03817394726485635, 0.04210940574576939, 0.046044864226682414, 0.04998032270759544,
                            0.05273514364423455, 0.05430932703659976, 0.05588351042896498, 0.05745769382133019,
                            0.0590318772136954, 0.06060606060606061, 0.06296733569460843, 0.06532861078315624,
                            0.06768988587170406, 0.07005116096025188, 0.0724124360487997, 0.0739866194411649,
                            0.0747737111373475, 0.07556080283353012, 0.07634789452971272, 0.07713498622589532,
                            0.07792207792207792, 0.07949626131444312, 0.08107044470680834, 0.08264462809917354,
                            0.08421881149153876, 0.08579299488390398, 0.08736717827626919, 0.0889413616686344,
                            0.09051554506099961, 0.09208972845336481, 0.09366391184573003, 0.09523809523809523,
                            0.09445100354191263, 0.09366391184573003, 0.09287682014954743, 0.09208972845336481,
                            0.09130263675718221, 0.089728453364817, 0.08736717827626918, 0.08500590318772136,
                            0.08264462809917356, 0.08028335301062574, 0.07792207792207792, 0.0755608028335301,
                            0.07319952774498228, 0.07083825265643448, 0.06847697756788663, 0.06611570247933882,
                            0.06414797323888231, 0.06257378984651711, 0.0609996064541519, 0.05942542306178669,
                            0.05785123966942149, 0.05627705627705628, 0.05391578118850847, 0.05155450609996065,
                            0.04919323101141281, 0.046831955922865, 0.04447068083431718, 0.04289649744195198,
                            0.04210940574576938, 0.04132231404958677, 0.04053522235340417, 0.03974813065722156,
                            0.03896103896103896, 0.03738685556867374, 0.03581267217630854, 0.03423848878394332,
                            0.03266430539157812, 0.031090121999212898, 0.029515938606847706, 0.027941755214482483,
                            0.026367571822117287, 0.024793388429752063, 0.023219205037386836, 0.021645021645021644 } },
            { { 0.02359882005899705, 0.025833556807008135, 0.02806829355501922, 0.030303030303030304,
                    0.03253776705104139, 0.03477250379905247, 0.03700724054706356, 0.03924197729507464,
                    0.0413575280831918, 0.04210244033252883, 0.04284735258186586, 0.04359226483120288,
                    0.04433717708053991, 0.04508208932987694, 0.04582700157921397, 0.046571913828551,
                    0.0467208962784184, 0.04374124728107029, 0.040761598283722174, 0.03778194928637406,
                    0.03524924763862817, 0.03450433538929114, 0.03375942313995411, 0.033014510890617084,
                    0.03280593546080272, 0.03429575995947677, 0.03578558445815083, 0.037275408956824886,
                    0.03813950716605584, 0.03739459491671881, 0.03664968266738178, 0.035904770418044754,
                    0.03587497392807128, 0.03736479842674533, 0.038854622925419385, 0.040344447424093446,
                    0.04156610351300617, 0.042311015762343196, 0.043055928011680226, 0.04380084026101726,
                    0.04365185781114984, 0.04216203331247578, 0.04067220881380173, 0.03918238431512767,
                    0.038348082595870206, 0.038348082595870206, 0.038348082595870206, 0.038348082595870206,
                    0.03870564047555198, 0.03945055272488901, 0.04019546497422603, 0.040940377223563064,
                    0.0424599982122106, 0.04469473496022169, 0.04692947170823277, 0.049164208456243856,
                    0.049313190906111255, 0.0478233664074372, 0.04633354190876314, 0.044843717410089086,
                    0.04380084026101725, 0.04305592801168022, 0.042311015762343196, 0.041566103513006165,
                    0.040821191263669135, 0.04007627901433211, 0.03933136676499508, 0.03858645451565805,
                    0.03733500193677184, 0.035845177438097786, 0.034355352939423725, 0.03286552844074967,
                    0.03298471440064361, 0.03372962664998064, 0.03447453889931767, 0.03521945114865469,
                    0.03596436339799172, 0.03670927564732875, 0.037454187896665776, 0.03819910014600281,
                    0.04132773159321835, 0.045052292839903495, 0.048776854086588634, 0.05250141533327378,
                    0.05184589255385714, 0.050356068055183084, 0.04886624355650903, 0.04737641905783497,
                    0.045886594559160915, 0.044396770060486854, 0.0429069455618128, 0.041417121063138745,
                    0.039241977295074615, 0.03700724054706353, 0.034772503799052445, 0.03253776705104136,
                    0.027442567265576118, 0.02222818152021692, 0.017013795774857725, 0.011799410029498525 },
                    { 0.02064896755162242, 0.02547599892732636, 0.030303030303030304, 0.03513006167873424,
                            0.03995709305443819, 0.04478412443014213, 0.04827031375703942, 0.05041566103513006,
                            0.052561008313220706, 0.054706355591311345, 0.056851702869401985, 0.058997050147492625,
                            0.060069723786537944, 0.061142397425583264, 0.062215071064628584, 0.0632877447036739,
                            0.06436041834271923, 0.06543309198176454, 0.06650576562080987, 0.06757843925985518,
                            0.06865111289890051, 0.06972378653794584, 0.07079646017699115, 0.07079646017699115,
                            0.07079646017699115, 0.07079646017699115, 0.07079646017699115, 0.07079646017699115,
                            0.06972378653794584, 0.0675784392598552, 0.06543309198176454, 0.0632877447036739,
                            0.061142397425583264, 0.058997050147492625, 0.056851702869401985, 0.05470635559131134,
                            0.0525610083132207, 0.05041566103513006, 0.04827031375703942, 0.0471976401179941,
                            0.0471976401179941, 0.0471976401179941, 0.0471976401179941, 0.0471976401179941,
                            0.0471976401179941, 0.04666130329847144, 0.04612496647894878, 0.04558862965942612,
                            0.04505229283990346, 0.0445159560203808, 0.044515956020380804, 0.04505229283990346,
                            0.04558862965942612, 0.04612496647894878, 0.04666130329847144, 0.0471976401179941,
                            0.047733976937516756, 0.04827031375703942, 0.048806650576562076, 0.049342987396084746,
                            0.0498793242156074, 0.05175650308393673, 0.05497452400107268, 0.05819254491820865,
                            0.0614105658353446, 0.06462858675248057, 0.06784660766961652, 0.06838294448913917,
                            0.06891928130866183, 0.0694556181281845, 0.06999195494770716, 0.07052829176722983,
                            0.07079646017699115, 0.07079646017699115, 0.07079646017699115, 0.07079646017699115,
                            0.07079646017699115, 0.07079646017699115, 0.06918744971842317, 0.0675784392598552,
                            0.0659694288012872, 0.06436041834271922, 0.06275140788415123, 0.06087422901582193,
                            0.05872888173773129, 0.05658353445964065, 0.05443818718155001, 0.05229283990345937,
                            0.05014749262536873, 0.04800214534727807, 0.04585679806918745, 0.04371145079109679,
                            0.04156610351300617, 0.03942075623491552, 0.03593456690801826, 0.031107535532314275,
                            0.026280504156610388, 0.0214534727809064, 0.016626441405202416, 0.011799410029498525 } },
            { { 0.022292993630573247, 0.024705655278903685, 0.027118316927234126, 0.02953097857556456,
                    0.031943640223895, 0.034356301872225437, 0.03676896352055588, 0.03918162516888631,
                    0.04152994917326128, 0.04313839027214823, 0.044746831371035196, 0.04635527246992215,
                    0.0478672071028759, 0.048671427652319375, 0.049475648201762853, 0.05027986875120633,
                    0.05056938814900598, 0.04815672650067554, 0.045744064852345105, 0.043331403204014664,
                    0.04124042977546162, 0.04043620922601814, 0.03963198867657466, 0.03882776812713118,
                    0.03821656050955414, 0.03821656050955414, 0.03821656050955414, 0.03821656050955414,
                    0.03821656050955414, 0.03821656050955414, 0.03821656050955414, 0.03821656050955414,
                    0.03821656050955414, 0.03821656050955414, 0.03821656050955414, 0.03821656050955414,
                    0.03821656050955414, 0.03821656050955414, 0.03821656050955414, 0.03821656050955414,
                    0.03950331338866372, 0.04272019558643764, 0.04593707778421156, 0.049153959981985476,
                    0.05201698513800426, 0.0544296467863347, 0.05684230843466514, 0.05925497008299557,
                    0.05973750241266165, 0.05812906131377469, 0.05652062021488773, 0.05491217911600077,
                    0.053721932702824424, 0.052917712153380946, 0.05211349160393747, 0.05130927105449398,
                    0.050505050505050504, 0.049700829955607026, 0.04889660940616355, 0.04809238885672007,
                    0.044875506658946136, 0.04005018336228526, 0.03522486006562438, 0.030399536768963502,
                    0.027118316927234116, 0.024705655278903678, 0.022292993630573237, 0.019880331982242795,
                    0.01910828025477707, 0.01910828025477707, 0.01910828025477707, 0.01910828025477707,
                    0.01968731905037638, 0.02049153959981986, 0.021295760149263338, 0.022099980698706816,
                    0.0253490317184585, 0.029370134465675896, 0.0333912372128933, 0.037412339960110695,
                    0.040146689828218514, 0.04255935147654895, 0.04497201312487939, 0.04738467477320983,
                    0.04777070063694268, 0.04777070063694268, 0.04777070063694268, 0.04777070063694268,
                    0.047062986553432405, 0.04625876600398893, 0.04545454545454544, 0.044650324905101964,
                    0.041626455639194454, 0.038409573441420534, 0.035192691243646615, 0.0319758090458727,
                    0.026442771665701605, 0.020813227819597248, 0.01518368397349289, 0.009554140127388535 },
                    { 0.03184713375796178, 0.034163288940359006, 0.03647944412275622, 0.038795599305153444,
                            0.04111175448755067, 0.04342790966994788, 0.045744064852345105, 0.04806022003474233,
                            0.05037637521713955, 0.052692530399536766, 0.05500868558193399, 0.05732484076433121,
                            0.05848291835552982, 0.059640995946728434, 0.06079907353792704, 0.06195715112912566,
                            0.06311522872032427, 0.06369426751592357, 0.06369426751592357, 0.06369426751592357,
                            0.06369426751592357, 0.06369426751592357, 0.06369426751592357, 0.06427330631152287,
                            0.06485234510712218, 0.06543138390272148, 0.06601042269832079, 0.06658946149392009,
                            0.06601042269832079, 0.06427330631152288, 0.06253618992472496, 0.06079907353792704,
                            0.05906195715112912, 0.05732484076433121, 0.0555877243775333, 0.05385060799073538,
                            0.05211349160393746, 0.05037637521713955, 0.04863925883034163, 0.04777070063694268,
                            0.04777070063694268, 0.04777070063694268, 0.04777070063694268, 0.04777070063694268,
                            0.04777070063694268, 0.04719166184134337, 0.04661262304574407, 0.04603358425014476,
                            0.045454545454545456, 0.04487550665894614, 0.04487550665894615, 0.045454545454545456,
                            0.04603358425014476, 0.04661262304574407, 0.04719166184134337, 0.04777070063694268,
                            0.04950781702374059, 0.051244933410538505, 0.05298204979733642, 0.054719166184134346,
                            0.05645628257093226, 0.058772437753329486, 0.06166763173132601, 0.06456282570932254,
                            0.06745801968731906, 0.07035321366531558, 0.0732484076433121, 0.0732484076433121,
                            0.0732484076433121, 0.0732484076433121, 0.0732484076433121, 0.0732484076433121,
                            0.07266936884771279, 0.07151129125651418, 0.07035321366531558, 0.06919513607411697,
                            0.06803705848291836, 0.06687898089171974, 0.06572090330052113, 0.06456282570932252,
                            0.06340474811812391, 0.0622466705269253, 0.06108859293572669, 0.05964099594672843,
                            0.05790387955993051, 0.0561667631731326, 0.05442964678633468, 0.052692530399536766,
                            0.050955414012738856, 0.04863925883034161, 0.04632310364794442, 0.044006948465547174,
                            0.04169079328314998, 0.039374638100752736, 0.035321366531557645, 0.02953097857556454,
                            0.023740590619571553, 0.017950202663578448, 0.012159814707585346,
                            0.006369426751592357 } } };

    public static void main(String[] args) {
        // generateModel("GridNums/NYT/");
        // trainModel();
        // testPrecedence();
        String[] directories = { "COM/", "CoolMath/", "NYT/", "WEB/" };
        String prefix = "GridNums/";
        for (int i = 0; i < directories.length; i++) {
            for (int j = 1; j < 10; j++) {
                try {
                    BufferedImage bi = ImageIO.read(new File(prefix + directories[i] + j + ".png"));
                    // Color c = new Color(0, 0, 0);
                    // double[] rowHist = process(rowHistogram(bi, c));
                    // double[] colHist = process(colHistogram(bi, c));
                    // double[] rowErrors = new double[9];
                    // double[] colErrors = new double[9];
                    // for (int k = 0; k < rowErrors.length; k++) {
                    // rowErrors[k] = error(model[k][0], rowHist);
                    // colErrors[k] = error(model[k][1], colHist);
                    // }
                    // int num = minIdx(rowErrors) + 1;
                    // boolean change = false;
                    // for (Swap sw : Swap.swaps) {
                    // if (sw.change(num) && !change) {
                    // if (sw.valid(rowErrors[sw.endNum() - 1], colErrors[sw.endNum() - 1])) {
                    // change = true;
                    // num = sw.endNum();
                    // }
                    // }
                    // }
                    // // boolean changed = false;
                    // // for (int k = 0; k < precedence.length; k++) {
                    // // if (!changed && precedence[k][0] == num) {
                    // // double[] errors2 = new double[precedence[k].length - 1];
                    // // for (int l = 0; l < errors2.length; l++) {
                    // // errors2[l] = colErrors[precedence[k][l]];
                    // // }
                    // // int newIdx = minIdx(errors2);
                    // // if (Math.abs(
                    // // rowErrors[precedence[k][newIdx + 1]] - rowErrors[num - 1]) <
                    // // allowedRowError[k]) {
                    // // num = precedence[k][newIdx + 1];
                    // // changed = true;
                    // // } else {
                    // // changed = false;
                    // // }
                    // // }
                    // // }
                    // if (num != j) {
                    // System.out.println(num + "->" + j);
                    // System.out.println(rowErrors[j - 1]);
                    // System.out.println(colErrors[j - 1]);
                    // }
                    System.out.println(processImage(bi));
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }

    public static void log(String txt) {
        try {
            BufferedReader br = new BufferedReader(new FileReader(new File("HistogramGenerator.log")));
            String text = "";
            String line = br.readLine();
            while (line != null) {
                text += line + "\n";
                line = br.readLine();
            }
            br.close();
            BufferedWriter bw = new BufferedWriter(new FileWriter(new File("HistogramGenerator.log")));
            bw.write(text + txt + "\n");
            bw.close();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    public static void testPrecedence() {
        log("--------New Session--------");
        String[] directories = { "COM/", "CoolMath/", "NYT/", "WEB/" };
        String prefix = "GridNums/";
        int[][] swaps = { { 1, 2, 7 }, { 3, 2, 5 }, { 5, 1 }, { 6, 5 }, { 8, 5 } };
        for (int i = 0; i < directories.length; i++) {
            for (int j = 0; j < swaps.length; j++) {
                try {
                    BufferedImage bi = ImageIO.read(new File(prefix + directories[i] + swaps[j][0] + ".png"));
                    String txt = prefix + directories[i] + swaps[j][0] + ".png\n";
                    Color c = new Color(0, 0, 0);
                    double[] rowHist = process(rowHistogram(bi, c));
                    double[] colHist = process(colHistogram(bi, c));
                    double[] errors = new double[swaps[j].length];
                    for (int k = 0; k < swaps[j].length; k++) {
                        txt += swaps[j][0] + " vs " + swaps[j][k] + "\n";
                        txt += "Row: " + error(model[swaps[j][k] - 1][0], rowHist) + "\n";
                        txt += "Col: " + error(model[swaps[j][k] - 1][1], colHist) + "\n";
                        txt += "Sum: " + (error(model[swaps[j][k] - 1][0], rowHist)
                                + error(model[swaps[j][k] - 1][1], colHist)) + "\n";
                    }
                    log(txt);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }

    public static void trainModel() {
        int numIter = 100;
        double[] errors = new double[numIter];
        for (int i = 0; i < numIter; i++) {
            double weight = 1.0 / (numIter - 1) * i;
            errors[i] = testModel(weight);
        }
        // for(int i =0; i < numIter; i++)
        // {
        // System.out.println(1.0/(numIter-1)*i+": "+errors[i]);
        // }
        System.out.println("Best Value: " + 1.0 / (numIter - 1) * minIdx(errors));
    }

    public static double testModel(double weight) {
        double totalError = 0;
        String[] directories = { "COM/", "CoolMath/", "NYT/", "WEB/" };
        String prefix = "GridNums/";
        for (int i = 0; i < directories.length; i++) {
            for (int j = 1; j < 10; j++) {
                try {
                    BufferedImage bi = ImageIO.read(new File(prefix + directories[i] + j + ".png"));
                    Color c = new Color(0, 0, 0);
                    double[] rowHist = process(rowHistogram(bi, c));
                    double[] colHist = process(colHistogram(bi, c));
                    totalError += error(model[j - 1][0], rowHist) * weight
                            + error(model[j - 1][1], colHist) * (1 - weight);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
        return totalError;
    }

    public static void generateModel(String prefix) {
        for (int i = 0; i < 9; i++) {
            try {
                BufferedImage bi = ImageIO.read(new File(prefix + (i + 1) + ".png"));
                Color c = new Color(0, 0, 0);
                double[] rowHist = process(rowHistogram(bi, c));
                double[] colHist = process(colHistogram(bi, c));
                model[i][0] = rowHist;
                model[i][1] = colHist;
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
        try {
            BufferedWriter bw = new BufferedWriter(new FileWriter(new File("model.txt")));
            String out = "{";
            for (int i = 0; i < model.length; i++) {
                out += "{{" + toString(model[i][0]) + "},{" + toString(model[i][1]) + "}}"
                        + (i < model.length - 1 ? "," : "};");
            }

            bw.write(out);
            bw.close();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    public static int processImage(BufferedImage bi) {
        Color c = new Color(0, 0, 0);
        double[] rowHist = process(rowHistogram(bi, c));
        double[] colHist = process(colHistogram(bi, c));
        double[] rowErrors = new double[9];
        double[] colErrors = new double[9];
        for (int k = 0; k < rowErrors.length; k++) {
            rowErrors[k] = error(model[k][0], rowHist);
            colErrors[k] = error(model[k][1], colHist);
        }
        int num = minIdx(rowErrors) + 1;
        boolean change = false;
        for (Swap sw : Swap.swaps) {
            if (sw.change(num) && !change) {
                if (sw.valid(rowErrors[sw.endNum() - 1], colErrors[sw.endNum() - 1])) {
                    change = true;
                    num = sw.endNum();
                }
            }
        }
        return num;
    }

    public static int processImage(BufferedImage bi, double weight) {
        Color c = new Color(0, 0, 0);
        double[] rowHist = process(rowHistogram(bi, c));
        double[] colHist = process(colHistogram(bi, c));
        double[] errors = new double[9];
        for (int i = 0; i < 9; i++) {
            errors[i] = error(model[i][0], rowHist) * weight + error(model[i][1], colHist) * (1 - weight);
        }
        return minIdx(errors) + 1;
    }

    public static int minIdx(double[] vals) {
        int idx = 0;
        double val = vals[0];
        for (int i = 0; i < vals.length; i++) {
            if (vals[i] < val) {
                val = vals[i];
                idx = i;
            }
        }
        return idx;
    }

    public static double error(double[] a, double[] b) {
        double out = 0;
        for (int i = 0; i < a.length; i++) {
            out += Math.pow(a[i] - b[i], 2);
        }
        return Math.sqrt(out);
    }

    public static int[] rowHistogram(BufferedImage bi, Color c) {
        int[] out = new int[bi.getHeight()];
        for (int j = 0; j < bi.getHeight(); j++) {
            int count = 0;
            for (int i = 0; i < bi.getWidth(); i++) {
                if (bi.getRGB(i, j) == c.getRGB()) {
                    count++;
                }
            }
            out[j] = count;
        }
        return out;
    }

    public static int[] colHistogram(BufferedImage bi, Color c) {
        int[] out = new int[bi.getWidth()];
        for (int i = 0; i < bi.getWidth(); i++) {
            int count = 0;
            for (int j = 0; j < bi.getHeight(); j++) {
                if (bi.getRGB(i, j) == c.getRGB()) {
                    count++;
                }
            }
            out[i] = count;
        }
        return out;
    }

    public static double[] process(int[] hist) {
        hist = removeZero(hist);
        double[] h = new double[hist.length];
        for (int i = 0; i < h.length; i++) {
            h[i] = (double) hist[i] / sum(hist);
        }
        return resize(h, 100);
    }

    public static int[] removeZero(int[] arr) {
        int leftIdx = 0;
        int rightIdx = arr.length;
        boolean l = true;
        boolean r = true;
        for (int i = 0; i < arr.length; i++) {
            if (l && leftIdx < arr.length && arr[leftIdx] == 0) {
                leftIdx++;
            } else {
                l = false;
            }
            if (r && rightIdx > 0 && arr[rightIdx - 1] == 0) {
                rightIdx--;
            } else {
                r = false;
            }
        }
        if (leftIdx < rightIdx) {
            return subarr(arr, leftIdx, rightIdx);
        } else {
            return null;
        }
    }

    public static int[] subarr(int[] arr, int min, int max) {
        int[] out = new int[max - min];
        for (int i = min; i < max; i++) {
            out[i - min] = arr[i];
        }
        return out;
    }

    public static double[] resize(double[] in, int length) {
        double[] out = new double[length];
        double scalar = (double) (in.length - 1) / (out.length - 1);
        for (int i = 0; i < out.length; i++) {
            double tempIdx = scalar * i;
            int minIdx = (int) Math.floor(tempIdx);
            int maxIdx = (int) Math.ceil(tempIdx);
            out[i] = linearInterpolation(in[minIdx], in[(maxIdx < in.length ? maxIdx : in.length - 1)],
                    tempIdx - minIdx);
        }
        return out;
    }

    public static double linearInterpolation(double min, double max, double percentage) {
        return (max - min) * percentage + min;
    }

    public static double sum(double[] arr) {
        double sum = 0;
        for (double v : arr) {
            sum += v;
        }
        return sum;
    }

    public static int sum(int[] arr) {
        int sum = 0;
        for (int v : arr) {
            sum += v;
        }
        return sum;
    }

    public static String toString(double[] arr) {
        String out = "";
        for (double v : arr) {
            out += v + ",";
        }
        return out.substring(0, out.length() - 1);
    }

    public static void print(int[] arr) {
        for (int v : arr) {
            System.out.print(v);
        }
        System.out.println();
    }

    public static void print(double[] arr) {
        System.out.println(toString(arr));
    }
}